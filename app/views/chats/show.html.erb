<head>
  <style>
    .scrollable {
      max-height: 400px;
      overflow-y: scroll;
      scrollbar-width: thin;
      scrollbar-color: transparent transparent;
    }
  </style>
</head>

<div class='container mt-3' style="width: 80%">
  <h2 id="room" data-room="<%= @room.id %>" data-user="<%= current_user.id %>">
    <%= @user.first_name %> さんとのチャット
  </h2>
  <div class='row' style="height: 400px;">
    <div class="message col-9 scrollable">
      <% @chats.each do |chat| %>
        <% if chat.user_id == current_user.id %>
          <%= render "chats/chat", chat: chat %>
        <% else %>
          <div class="line__balloon_l">
            <%= image_tag @user.get_profile_image, size: '70x70', style: 'border-radius: 50%' %>
            <div class="balloon__content">
              <p class="line__balloon_text"><span><%= chat.message %></span></p>
            </div>
          </div>
        <% end %>
      <% end %>
    </div>
  </div>

  <%= form_with model: @chat, data: {remote: true} do |f| %>
    <div style="overflow: hidden;">
      <%= f.text_area :message, placeholder: "メッセージをここに", class: "form-control col-9", style: "float: left; height: 100px;", id: "chat_textarea" %>
      <%= f.button "送信", class: "button-hover mx-auto mb-3", style: "margin-right: 50px; float: right;" %>
      <%= f.hidden_field :room_id %>
      <button class="button-hover ml-auto"id="clear">入力内容をクリア</button>
      <script>
        $(function(){
          $("#clear").click(function(){
            $("#chat_textarea").val("");
          });
        });
      </script>
    </div>
  <% end %>
</div>
